"""
Author: Ben Bornholm
Date: 2-14-16
Description:

"""
from urllib2 import urlopen
from bs4 import BeautifulSoup
import sys

#robots global var
robots = ""
robotsDict = {}

def main():
	global robots, robotsDict
	
	link = sys.argv[1]
	print link
	
	#enter web page to get contents
        htmlPage = urlopen(link)

        #Create beautiful soup object
        bsObj = BeautifulSoup(htmlPage.read())

        #Print object
        #print (bsObj)

	tempLst = []

	#for each line in bsObj
	for line in bsObj:
		tempLst = str(line).split('\n')
		
		for x in tempLst:
			#Disallow: /about/careers/apply/
			if 'Disallow:' in x:
				tempElements = x.split('/')
				
				#/about, /careers
				for element in tempElements:		
					if not 'Disallow' in element:
						
						if element not in robotsDict:
							tempLst = [1, x[10:]]
							robotsDict[element] = tempLst
						else:
							tempLst = robotsDict[element]
							num = tempLst[0]
							num = num +1
							tempLst[0] = num
							tempLst.append(x[10:])
							robotsDict[element] = tempLst						


	
	print 'keyword\t\t#\tpattern'
	print '--------------------------------------------------------------------------------------------------------------------'
	for key, value in sorted(robotsDict.iteritems()):
		tempStr = ""
		for x in robotsDict[key]:
			tempStr += str(x)+ ' , '
		print str(key)+':\t\t'+tempStr

	print '======================================================================================================================\n\n'
	tempLst = []
	
	sorted_list = [(k,v) for v,k in sorted([(v,k) for k,v in robotsDict.items()],reverse=True)]

	print '#\tkeyword\t\tpatterns'
	print '---------------------------------------------------------------------------------------------------------------------'
	for x in sorted_list:
		print str(x[1][0]) +'\t'+ str(x[0]) +'\t\t'+ str(x[1][1:])





main()
