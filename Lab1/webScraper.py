"""
Author: Ben Bornholm
Date: 2-1-16
Description: A web scraper for pen testing
	-f: take a file with a bunch of links
	-l: take a web link in
"""
from urllib2 import urlopen
from bs4 import BeautifulSoup
import time
import sys
import threading

def connection(link,sleepTime):
	#enter web page to get contents
	htmlPage = urlopen(link)
	
	#Create beautiful soup object
	bsObj = BeautifulSoup(htmlPage.read())
	
	#Print object
	print (bsObj)
	
	#Make thread sleep
	time.sleep(sleepTime)

def main():
	print len(sys.argv)
	if len(sys.argv) < 2:
		print "Usage: python webScraper.py -f <file with a list of links> -t <seconds of sleep>"
		print "Usage: python webScraper.py -l <web link>"

	#for file
	if '-f' in sys.argv:
		f = open(sys.argv[2], 'r')
		for line in f:
			threads = []
			for i in range(20):
				t = threading.Thread(target=connection, args=(line,int(sys.argv[4])))
				threads.append(t)
				t.start()
		
	#for web link		
	if '-l' in sys.argv:	
		webLink = sys.argv[2]
		connection(webLink,0)
main()
